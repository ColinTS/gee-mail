<!DOCTYPE html>
<html lang="en"n>
	<head>
    <link href='https://fonts.googleapis.com/css?family=Varela+Round' rel='stylesheet' type='text/css'>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
		<script src="js/mail-generator.js"></script>
		<link href="css/style.css" rel="stylesheet" media="screen">
    <script>
      window.onload = function(){
			 
			function newMessage(){
				// Loop goes through emails and creats divs for subject, date, sender, and body
			 	var i = 0;
				while(i < window.geemails.length) {
			 	
			 	//email container
				var div = document.createElement("div");
				
				//date
				var dateField = document.createElement("h1");
				dateField.className = "date";
				dateField.innerHTML = window.geemails[i].date;
				div.appendChild(dateField);
				 
				//subject
				var subjectField = document.createElement("h1");
				subjectField.className = "subject";
				subjectField.innerHTML = window.geemails[i].subject;
				div.appendChild(subjectField);
				
				//sender
				var senderField = document.createElement("h1");
				senderField.className = "sender";
				senderField.innerHTML = window.geemails[i].sender;
				div.appendChild(senderField);
				
				//body
				var bodyField = document.createElement("p");
				bodyField.className = "body";
				bodyField.innerHTML = window.geemails[i].body;
				div.appendChild(bodyField);
				 
				//Separate message content into containers
				document.getElementById("main").appendChild(div);
				 
				//inbox counter
				document.getElementById('counter').innerHTML = "You have " + document.getElementsByClassName("date").length + " messages";
				
				window.geemails.shift();
			 }
			
		}
				
			
			newMessage();
			

				
			//interval for loading new messages
			function addNewMessage() {
				setInterval(function(){
					window.geemails.push(getNewMessage());newMessage();
				}, 3000);
			}
     		
			addNewMessage();
				
			$('div').click(function(){
      $('.body').show();
});
										
      };
    </script>
	</head>
	<body>
        <div class = "header">
            <h1 class="title">Gee-Mail</h1>
        </div>
				<div id = "counter"></div>
		
		<div class="container" id="main">
			<div class='body'></div>
		</div>
	</body>
</html>
